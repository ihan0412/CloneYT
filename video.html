<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'
   viewBox='0 0 28 20'><path d='M27.4433 3.12038C27.129 1.89551 26.1331 0.90449 24.902 0.590184C22.716
   0 14 0 14 0C14 0 5.284 0 3.09801 0.590184C1.86687 0.90449 0.871033 1.89551 0.556684 3.12038C0 5.3402
    0 10 0 10C0 10 0 14.6598 0.556684 16.8796C0.871033 18.1045 1.86687 19.0955 3.09801 19.4098C5.284 20 14
    20 14 20C14 20 22.716 20 24.902 19.4098C26.1331 19.0955 27.129 18.1045 27.4433 16.8796C28 14.6598 28 10
    28 10C28 10 28 5.3402 27.4433 3.12038Z' fill='%23FF0000'/><path d='M11.1999 14.2857L18.3999 10L11.1999
    5.71429V14.2857Z' fill='white'/></svg>">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!--부트스트랩 아이콘-->
    <link rel="stylesheet" href="css/videoNavbar.css"/>
    <link rel="stylesheet" href="css/videolist.css"/>
    <style>
        .main-content {
            padding: 15px;
        }

        .related-content,
        .comments-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #212121;
            border-radius: 8px;
        }


        @media (min-width: 992px) {
            .main-content {
                padding: 20px;
            }

            .comments-section {
                margin-top: 25px;
            }

            .related-content {
                margin-top: 0;
                margin-left: 20px;
            }
        }

        .channel-profile-img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        @media (min-width: 1200px) {
        }


        /* 구독자 수 스타일 */
        .sub-count {
            font-size: 0.85em; /* 채널명보다 작게 */
            color: #aaaaaa; /* 회색 텍스트 */
        }

        /* 구독 버튼 스타일 */
        .subscribe-btn {
            background-color: white; /* 유튜브 빨간색 */
            color: black;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            white-space: nowrap; /* 텍스트 줄바꿈 방지 */
            flex-shrink: 0; /* flex item에서 크기가 줄어들지 않도록 */
        }

        .subscribe-btn:hover {
            background-color: lightgray;
        }

        /* 액션 버튼 그룹 컨테이너 (좋아요, 공유 등) */
        .action-buttons .btn {
            background-color: #2f2f2f; /* 버튼 배경색 */
            color: #ffffff; /* 버튼 글자색 */
            border: none;
            border-radius: 20px; /* 둥근 모서리 */
            font-size: 0.9rem;
            white-space: nowrap; /* 텍스트 줄바꿈 방지 */
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .action-buttons .btn:hover {
            background-color: #3e3e3e;
            color: #ffffff;
        }

        /* 좋아요/싫어요 버튼 그룹의 가운데 구분선 */
        .like-dislike-group .btn:first-child {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.2); /* 구분선 */
        }

        .like-dislike-group .btn:last-child {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        /* 드롭다운 토글 버튼 (점 3개 버튼) */
        .action-buttons .dropdown-toggle {
            width: 40px;
            height: 40px;
            padding: 0;
            justify-content: center;
        }

        .action-buttons .dropdown-toggle::after {
            display: none;
        }

        /* 드롭다운 메뉴 스타일 */
        .dropdown-menu-dark {
            background-color: #282828;
            border: 1px solid #424242;
        }

        .dropdown-menu-dark .dropdown-item {
            color: #ffffff;
        }

        .dropdown-menu-dark .dropdown-item:hover {
            background-color: #383838;
        }

        .dropdown-menu-dark .dropdown-divider {
            border-color: rgba(255, 255, 255, 0.1);
        }


        .video-details-info {
            background-color: #212121;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        /* 설명 텍스트 (줄임말 기능) */
        .description-text {
            display: -webkit-box;
            -webkit-line-clamp: 3; /* 기본 3줄로 제한 */
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal; /* 줄바꿈 허용 */
        }

        .description-text.expanded {
            -webkit-line-clamp: unset; /*위의 기본 3줄 스타일 제거*/
            overflow: visible;
        }

        .show-more-btn {
            background: none;
            border: none;
            color: #aaaaaa;
            font-weight: 600;
            padding: 0;
            margin-left: 5px;
        }

        .show-more-btn:hover {
            text-decoration: underline;
        }

    </style>
</head>
<body>
<div class="ytbar"></div>

<div class="main-content">
    <!--일단은 하나의 동영상만 추가하는 식으로 쿼리스트링을 통해서 그에 맞는 동영상 불러오기 각 영상 클릭 시 video.html?videoId=1 형식의 페이지로 이동-->
    <div class="container-fluid video-player-wrapper">
        <div class="row">
            <!--동영상 + 제목 + detail info-->
            <div class="col-12 col-lg-8 order-lg-1"> <!--작은 화면에서 12의 범위 모두 점유, lg수치를 기준으로 더 커지면 8 범위 점유-->
                <!--동영상 화면 -->
                <div class="ratio ratio-16x9 mb-3">
                    <iframe src="https://www.youtube.com/embed/xlaPti4ElCk?si=Du5ogA2FbwpEwj3_"
                            title="YouTube video player" referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen allow="accelerometer; autoplay;
                            clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
                </div>
                <!-- 제목 -->
                <h5 class="mb-3" style="font-weight: bold;">you look tired, take a little break :)</h5>
                <div class="d-flex align-items-center justify-content-between">

                    <div class="d-flex align-items-center mb-2">
                        <!--모통 margin-start 보단 margin-end 를 사용하는 듯 함-->
                        <img class="channel-profile-img me-3" src="img/nobody.jpg" alt="User Profile">
                        <div class="me-3">
                            <p class="channel-name mb-0" style="font-weight: bold;">nobody <i
                                    class="bi bi-check-circle-fill text-primary ms-1"></i></p>
                            <p class="sub-count mb-0">구독자 102만명</p>
                        </div>
                        <button class="subscribe-btn">구독</button>
                    </div>

                    <div class="d-flex action-buttons justify-content-end gap-2 mb-2 mb-sm-0">
                        <div class="btn-group like-dislike-group">
                            <button type="button" class="btn" id="like-btn"><i class="bi bi-hand-thumbs-up"></i><span>102</span>
                            </button>
                            <button type="button" class="btn" id="dislike-btn"><i class="bi bi-hand-thumbs-down"></i>
                            </button>
                        </div>

                        <div class="d-none d-md-flex gap-2">
                            <button type="button" class="btn"><i class="bi bi-share-fill"></i> 공유</button>
                            <button type="button" class="btn"><i class="bi bi-box-arrow-in-down"></i> 저장</button>
                        </div>

                        <div class="dropdown">
                            <button class="btn dropdown-toggle" type="button" id="moreActionsDropdown"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end"
                                aria-labelledby="moreActionsDropdown">
                                <li class="d-md-none"><a class="dropdown-item" href="#"><i
                                        class="bi bi-share-fill me-2"></i> 공유</a></li>
                                <li class="d-md-none"><a class="dropdown-item" href="#"><i
                                        class="bi bi-box-arrow-in-down me-2"></i> 저장</a></li>
                                <li class="d-md-none">
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-flag me-2"></i> 신고</a></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-download me-2"></i> 오프라인 저장</a>
                                </li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-person-plus me-2"></i> 채널 공유</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- detail info -->
                <div class="video-details-info">
                    <div class="d-flex align-items-center mb-2">
                        <span class="fw-bold">조회수 85만회</span>
                        <span class="ms-2 me-2">•</span>
                        <span>8개월 전</span>
                        <span class="ms-2 me-2">•</span>
                        <span class="text-primary me-2">#relaxingmusic</span>
                        <span class="text-primary">#playlist</span>
                    </div>
                    <p class="description-text mb-0" id="videoDescription">
                        patreon: <a href="#"
                                    class="text-decoration-none text-white-50">patreon.com/nobodyplaylists</a><br>
                        discord: <a href="#" class="text-decoration-none text-white-50">discord.com/discord</a><br>
                        이 동영상은 여러분이 피곤할 때 잠시 쉬어갈 수 있도록 만들어진 편안한 음악 플레이리스트입니다. 깊은 휴식을 취해보세요.
                        <br><br>
                        tracklist<br>
                        00:00 koji kondo, r3 music box - piranha plant's lullaby (super mario 64)<br>
                        • Piranha Plant's Lullaby/Super Mario 64 [Mu...<br>
                        01:39 mario galaxy orchestra - cosmic cove galaxy (super mario galaxy 2)<br>
                        • Super Mario Galaxy 2 Soundtrack - Cosmic C...<br>
                        05:21 koji kondo, video game music box - zora's domain (the legend of zelda, ocarina of
                        time)<br>
                        • Zora's Domain<br>
                        09:04 mario galaxy orchestra - world 3 (super mario galaxy 2)<br>
                        • Super Mario Galaxy 2 Soundtrack - World 3<br>
                        11:17 koji kondo, video game music box - the great fairy fountain (the legend of zelda)<br>
                        • Legend of Zelda: The Great Fairy Fountain ...<br>
                        14:32 logobro2 - jolly roger bay<br>
                        • Super Mario 64- The Unused Music<br>
                        16:40 bach, r3 music box - fugue in g minor<br>
                        • Fugue in G minor/J.S. Bach [Music Box]<br>
                        17:58 kazumi totaka, manaka kataoka, atsuku asahi - the roost (animal crossing, new leaf)<br>
                        • The Roost - Animal Crossing: New Leaf<br>
                        19:22 schubert, r3 music box - wiegenlied, d. 498, op. 98, no. 2<br>
                        • Wiegenlied, D. 498, op. 98 No. 2/Franz Sch...<br>
                        21:39 tomoya tomita - splash beach, night time (kirby's epic yarn)<br>
                        • Kirby's Epic Yarn - Splash Beach (Night Time)<br>
                        23:09 yoko shimomura, video game music box - dearly beloved (kingdom hearts)<br>
                        • Kingdom Hearts: Dearly Beloved || Video Ga...<br>
                        25:36 mario galaxy orchestra - world 4 (super mario galaxy 2)<br>
                        • Super Mario Galaxy 2 Soundtrack - World 4<br>
                        28:15 shostakovich, r3 music box - waltz no. 2<br>
                        • Waltz No.2/Dmitri Shostakovich [Music Box]<br>
                        29:48 naoto kubo, shiho fujii, koji kondo - bubblaine, underwater (super mario odyssey)<br>
                        • Bubblaine (Underwater)- Super Mario Odysse...<br>
                        33:39 handel-halvorsen, r3 music box - passacaglia<br>
                        • Passacaglia/Handel-Halvorsen [Music Box]<br>
                        36:26 kazumi totaka - 6pm, rainy (animal crossing, new horizons)<br>
                        • 6PM (Rainy) - Animal Crossing: New Horizon...<br>
                        38:42 repeat<br><br>

                        copyright<br>
                        all rights to the original owners and composers, i don't own any music or images used in this
                        video
                    </p>
                    <button class="show-more-btn mt-2" id="toggleDescription">...더보기</button>
                </div>

            </div>
            <div class="col-12 col-lg-4 order-lg-2">
                <div class="related-content bg-dark text-white p-3 rounded mt-4 mt-lg-0">
                    <h4 class="mb-3">추천 동영상</h4>
                    <div class="row video-list">

                    </div>
                </div>
            </div>
            <!--댓글 기능-->
            <div class="col-12 col-lg-8 order-lg-3">
                <div class="comments-section bg-dark text-white p-3 rounded mt-4">
                    <h4 class="mb-4">댓글 <span id="commentCount">0</span>개</h4>

                    <div class="d-flex align-items-start mb-4">
                        <img src="img/doguser.png" class="channel-profile-img me-3" alt="내 프로필">
                        <div class="flex-grow-1">
                            <div class="form-floating comment-input-container mb-2">
                                <textarea class="form-control" placeholder="댓글 추가..." id="commentInput"></textarea>

                            </div>
                            <div class="d-flex justify-content-end gap-2">
                                <button type="button" class="btn btn-sm" id="cancelCommentBtn">취소</button>
                                <button type="button" class="btn btn-sm" id="postCommentBtn" disabled>댓글</button>
                            </div>
                        </div>
                    </div>

                    <div id="commentsList">
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
<script src="js/sidebar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // "더보기" 기능 JavaScript
        const toggleButton = document.getElementById('toggleDescription');
        const descriptionText = document.getElementById('videoDescription');

        if (toggleButton && descriptionText) { // 요소가 존재하는지 한번 더 확인하는 것이 좋습니다.
            toggleButton.addEventListener('click', function () {
                descriptionText.classList.toggle('expanded');
                if (descriptionText.classList.contains('expanded')) {
                    toggleButton.textContent = '간략히';
                } else {
                    toggleButton.textContent = '...더보기';
                }
            });
        }

        // 좋아요/싫어요 기능 JavaScript
        const likeBtn = document.getElementById('like-btn');
        const dislikeBtn = document.getElementById('dislike-btn');

    });

    /*좋아요 버튼*/
    document.addEventListener('DOMContentLoaded', () => {
        const likeBtn = document.getElementById('like-btn');
        const dislikeBtn = document.getElementById('dislike-btn');

        // 좋아요/싫어요 버튼 클릭 처리 함수
        function handleButtonClick(clickedButton, otherButton) {
            const clickedIcon = clickedButton.querySelector('.bi');
            // 클릭된 버튼의 숫자 span을 찾음 (없을 수도 있으므로 null 체크 필요) , 없으면 반환값은 null
            const clickedCountSpan = clickedButton.querySelector('span');
            let currentCount = clickedCountSpan ? parseInt(clickedCountSpan.textContent) : 0; // span이 없으면 0으로 간주

            const otherIcon = otherButton.querySelector('.bi');

            const otherCountSpan = otherButton.querySelector('span');
            let otherCount = otherCountSpan ? parseInt(otherCountSpan.textContent) : 0; // span이 없으면 0으로 간주

            // 클릭된 버튼에 'active' 클래스를 토글하고, 토글 후의 상태를 확인
            const isActiveNow = clickedButton.classList.toggle('active');

            // span 값이 null 이 아닐때 (숫자가 있을 때)
            if (clickedCountSpan) {
                if (isActiveNow) { // 버튼이 활성화된 경우 (클릭해서 'active' 상태가 됨)
                    currentCount++; // 현재 버튼 숫자 증가
                } else {
                    currentCount--;
                }
                clickedCountSpan.textContent = currentCount; // 현재 버튼 숫자 업데이트
            }


            if (otherButton.classList.contains('active')) {
                otherButton.classList.remove('active');

                const otherFillClass = otherIcon.classList[1].replace('-fill', '') + '-fill';
                const otherBaseClass = otherIcon.classList[1].replace('-fill', '');
                otherIcon.classList.remove(otherFillClass);
                otherIcon.classList.add(otherBaseClass);


                if (otherCountSpan) {
                    otherCount--;
                    otherCountSpan.textContent = otherCount;
                }
            }

            // 클릭된 버튼의 아이콘 클래스 변경
            const baseClassPart = clickedIcon.classList[1].replace('-fill', '');
            const fillClass = baseClassPart + '-fill';

            // isActiveNow가 true면 fill 클래스 추가, false면 제거
            clickedIcon.classList.toggle(fillClass, isActiveNow);
            // isActiveNow가 false면 base 클래스 추가, true면 제거 (서로 반대)
            clickedIcon.classList.toggle(baseClassPart, !isActiveNow);

        }

        // 좋아요/싫어요 버튼 클릭 이벤트 리스너
        likeBtn.addEventListener('click', () => handleButtonClick(likeBtn, dislikeBtn));
        dislikeBtn.addEventListener('click', () => handleButtonClick(dislikeBtn, likeBtn));
    });

    /* 댓글 기능 */
    document.addEventListener('DOMContentLoaded', () => {

    });


</script>
<script src="js/videoData.js"></script>
</body>
</html>
